@mixin range-style($name, $color) {
    &.#{$name} {
        > .ui-range {
            background-color: hsla(hue($color), saturation($color), lightness($color), .3);
            > .ui-range-btn {
                background-color: lighten($color, 10);
                &:hover, &:active {
                    background-color: $color;
                }
            }
        }
        &[disabled], &[readonly], &.disabled {
            > .ui-range > .ui-range-btn {
                cursor: not-allowed;
                &:hover, &:active {
                    background-color: lighten($color, 10);
                }
            }
        }
        &[disabled], &.disabled {
            > .ui-range > .ui-range-btn {
                cursor: not-allowed;
            }
        }
        &[readonly] {
            > .ui-range > .ui-range-btn {
                cursor: default;
            }
        }
    }
}

ui-input[type=range] {
    display: inline-block;
    cursor: pointer;

    height: .5em;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, .1);
    background-color: $color-lighter;
    border-radius: .3em;
    line-height: 0;
    &:before {
        content: '';
        display: block;
        width: 8em;
        height: 0;
    }
    > .ui-range {
        display: inline-block;
        height: 100%;
        position: relative;
        width: 50%;
        background-color: hsla(hue($color-gray), saturation($color-gray), lightness($color-gray), .3);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, .1);
        border-radius: inherit;
        cursor: default;
        > .ui-range-btn {
            position: absolute;
            width: 1.2em;
            height: 1.2em;
            right: -0.6em;
            top: 50%;
            border-radius: 50%;
            transform: translateY(-50%);
            transform-origin: 50% 50%;
            background-color: lighten($color-gray, 10);
            border: none;
            cursor: pointer;
            transition: all .2s;
            overflow: hidden;
            > button {
                cursor: inherit;
                width: 100%;
                height: 100%;
                opacity: 0;
                position: absolute;
                top: 0;
                right: 0;
                left: 0;
                bottom: 0;
            }
            &:hover, &:active {
                right: -0.7em;
                width: 1.4em;
                height: 1.4em;
                background-color: $color-gray;
            }
            &:active {
                box-shadow: 0 0 0 .3em $ui-input-focus-box-shadow-color;
            }
        }
    }

    > .ui-input-raw {
        width: 0;
        height: 0;
        position: absolute;
        overflow: hidden;
        opacity: 0;
    }
    //> ui-input-range {
    //    display: block;
    //}

    @include range-style(primary, $color-primary);
    @include range-style(info, $color-info);
    @include range-style(warning, $color-warning);
    @include range-style(success, $color-success);
    @include range-style(danger, $color-danger);
    &[disabled], &[readonly], &.disabled {
        opacity: .5;
        cursor: not-allowed;
        .ui-range > .ui-range-btn {
            transition: none;
            &:hover, &:active {
                width: 1.2em;
                height: 1.2em;
                right: -0.6em;
                background-color: lighten($color-gray, 20);
            }
            &:active {
                box-shadow: none;
            }
        }
    }
    &[readonly] {
        cursor: default;
    }

}

@keyframes input-focus {
    0% {
        border-radius: 50%;
        box-shadow: 0 0 0 .1em $ui-input-focus-box-shadow-color;
    }
    100% {
        border-radius: 50%;
        box-shadow: 0 0 0 .4em $ui-input-focus-box-shadow-color;
    }
}